.. _Channel-Parameter-Generator:

Channel Parameter Generator
===========================

This module provides classes and functions that generate parameters required to compute cluster level channel coefficients.
Channel parameters include correlated Large Scale Parametes (LSPs) such as path loss, delay spread, angular spreads of departure, 
angular spreads of arrival, both in azimuth, elevation direction. Small Scale Parameters (SSPs) such as cluster delays, cluster powers and cluster/ray angles.


The class :class:`ParameterGenerator` allows the user to generate all the parameters required to simulate cluster level channel.
The following table lists all the attributes of the class :class:`ParameterGenerator`, which capture the parameters necessary to generate cluster level 
channel coefficients. Users can display the clusters using the method :meth:`displayClusters` and can fetch channel coefficients through the method :meth:`getChannel`.
For more details refer [3GPPTS38901_parameterGenerator]_
 


+--------------------------------------------------------------+-----------------------------------------+
|                                                              |                                         |
|                  Parameter name                              |      Attribute                          |
|                                                              |                                         |
+===========+==================================================+=========================================+                                     
|           |    LOS Azimuth Arrival angle                     |  :attr:`phiAOA_LOS`                     |
|           +--------------------------------------------------+-----------------------------------------+ 
|           |    LOS Azimuth Departure angle                   |  :attr:`phiAOD_LOS`                     |
|           +--------------------------------------------------+-----------------------------------------+
| LOS angles|    LOS Zenith Arrival angle                      |  :attr:`thetaAOA_LOS`                   |
|           +--------------------------------------------------+-----------------------------------------+
|           |    LOS Zenith Departure angle                    |  :attr:`thetaAOD_LOS`                   |    
+-----------+--------------------------------------------------+-----------------------------------------+
|           |      Shadow Fading                               |  :attr:`shadowFading`                   |
|           +--------------------------------------------------+-----------------------------------------+ 
|           |      Rician K factor                             |  :attr:`kFactor`                        |
|           +--------------------------------------------------+-----------------------------------------+
| LSPs      |      Delay Spread                                |  :attr:`delaySpread`                    |
|           +--------------------------------------------------+-----------------------------------------+
|           |    Azimuth angular Spread of Departure           |  :attr:`phiAoD_spread`                  |  
|           +--------------------------------------------------+-----------------------------------------+
|           |    Azimuth angular Spread of Arrival             |  :attr:`phiAoA_spread`                  |  
|           +--------------------------------------------------+-----------------------------------------+
|           |    Zenith angular Spread of Departure            |  :attr:`thetaAoD_spread`                | 
|           +--------------------------------------------------+-----------------------------------------+
|           |    Zenith angular Spread of Arrival              |  :attr:`thetaAoA_spread`                | 
|           +--------------------------------------------------+-----------------------------------------+
|           |     Path Loss                                    |  :attr:`pathLoss`                       | 
+-----------+--------------------------------------------------+-----------------------------------------+
|           |   Cluster Azimuth angular Spread of Arrival      |  :attr:`cASA`                           |
|           +--------------------------------------------------+-----------------------------------------+ 
|           |   Cluster Azimuth angular Spread of Arrival      |  :attr:`cASD`                           |
|           +--------------------------------------------------+-----------------------------------------+
| SSPs      |   Cluster Zenith angular Spread of Arrival       |  :attr:`cZSA`                           |
|           +--------------------------------------------------+-----------------------------------------+
|           |   Cluster or Path delays                         |  :attr:`pathDelay`                      | 
|           +--------------------------------------------------+-----------------------------------------+
|           |   Cluster or Path Power                          |  :attr:`pathPower`                      |  
|           +--------------------------------------------------+-----------------------------------------+
|           | Azimuth angle of Arrival per ray per cluster     |  :attr:`phiAoA_mn`                      |  
|           +--------------------------------------------------+-----------------------------------------+
|           | Azimuth angle of Departure per ray per cluster   |  :attr:`phiAoD_mn`                      | 
|           +--------------------------------------------------+-----------------------------------------+
|           | Zenith angle of Arrival per ray per cluster      |  :attr:`thetaAoA_mn`                    | 
|           +--------------------------------------------------+-----------------------------------------+
|           | Zenith angle of Departure per ray per cluster    |  :attr:`thetaAoD_mn`                    | 
+-----------+--------------------------------------------------+-----------------------------------------+
|                                                              |                                         |
|       Cross Polarization Power Ratio per ray per cluster     |  :attr:`XPRnm`                          |
|                                                              |                                         |
+--------------------------------------------------------------+-----------------------------------------+ 
                                                             



.. autoclass:: toolkit5G.ChannelModels.ParameterGenerator
    :members:
    :exclude-members: call, build, displayClusters, getChannel


.. automethod:: toolkit5G.ChannelModels.parameterGenerator.parameterGenerator.ParameterGenerator.displayClusters
    :noindex:  


.. automethod:: toolkit5G.ChannelModels.parameterGenerator.parameterGenerator.ParameterGenerator.getChannel
    :noindex:  



**Example:**


.. code-block:: Python

  # terrain or scenario for BS-UE links "UMa"
  >>> terrain     = np.array(["UMa","UMi","InH-OO"])
  # links simulated at two carrier frequencies in GHz
  >>> carrierFreq = np.array([3,5])
  >>> numCarriers = carrierFreq.shape[0]
  # vector of Antenna Array objects at UE or Rx side
  >>> ueAntennaArray = np.empty(numCarriers, dtype=object)
  >>> for i in range(carrierFreq.size):
  >>>   ueAntennaArray[i] = AntennaArrays(antennaType     = "OMNI", 
  ...                                     centerFrequency = carrierFreq[i],
  ...                                     arrayStructure  = np.array([1,1,1,1,1]),
  ...                                     antennaSpacing  =  np.array([0.5,0.5,0.5,0.5]))
  # vector of Antenna Array objects at BS or Tx side                                    
  >>> bsAntennaArray = np.empty(numCarriers, dtype=object)
  >>> for i in range(carrierFreq.size):
  >>>   bsAntennaArray[i] = AntennaArrays(antennaType ="3GPP_38.901",
  ...                                     centerFrequency=carrierFreq[i],
  ...                                     arrayStructure = np.array([1,1,1,1,1]),
  ...                                     antennaSpacing =  np.array([0.5,0.5,0.5,0.5]))
  # simulating BS Layout and UE drops with the following configuration                                   
  >>> simLayoutObj = SimulationLayout(numOfBS = 19,
  ...                                 numOfUE = 100,
  ...                                 heightOfBS = 25,
  ...                                 heightOfUE = 10, 
  ...                                 ISD = 500,
  ...                                 layoutType = "Hexagonal",
  ...                                 numOfSectorsPerSite = 3,
  ...                                 minUEBSDistance = 35)                                                                       
  >>> simLayoutObj(terrain, carrierFreq, ueAntennaArray, bsAntennaArray)
  # displaying the topology of simulation layout
  >>> simLayoutObj.display2DTopology()
  # Instantiating ParameterGenerator class with the following parameters
  >>> paramGenObj = ParameterGenerator(fc = carrierFreq,
  ...                                  terrain = terrain,
  ...                                  locBS = simLayoutObj.BSLocations + simLayoutObj.BStracks,
  ...                                  locUE = simLayoutObj.UELocations + simLayoutObj.UEtracks,
  ...                                  d3D   = simLayoutObj.d3D,
  ...                                  d2D   = simLayoutObj.d2D)
  # Passing link state vector as input                               
  >>> paramGenObj(simLayoutObj.linkState) 
  # Now user can print all the parameters as follows. 
  # Below shows printing of path loss and cluster delays.
  # Same way user can print all the other parameters 
  # Printing Path Loss for the given scenario
  >>> paramGenObj.pathLoss                              
  # Printing cluster delays
  >>> paramGenObj.pathDelay






References:
    .. [3GPPTS38901_parameterGenerator] (3GPP TS 38.901 version 17.0.0 Release 17) 5G;NR;Study on channel model for frequencies from 0.5 to 100 GHz.